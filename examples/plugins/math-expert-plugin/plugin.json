{
  "name": "math-expert-plugin",
  "version": "1.0.0",
  "description": "Example plugin with math expert agent and contextual tools",
  "author": "Claude Code Team",
  "runtime": "python3",
  "dependencies": {
    "file": "requirements.txt"
  },
  "tools": [
    {
      "name": "add",
      "description": "Add two numbers together",
      "command": "python3",
      "args": [
        "tools/add.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "a": {
            "type": "number",
            "description": "First number"
          },
          "b": {
            "type": "number",
            "description": "Second number"
          }
        },
        "required": [
          "a",
          "b"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{a} + {b}"
    },
    {
      "name": "subtract",
      "description": "Subtract one number from another",
      "command": "python3",
      "args": [
        "tools/subtract.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "a": {
            "type": "number",
            "description": "Number to subtract from"
          },
          "b": {
            "type": "number",
            "description": "Number to subtract"
          }
        },
        "required": [
          "a",
          "b"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{a} - {b}"
    },
    {
      "name": "multiply",
      "description": "Multiply two numbers together",
      "command": "python3",
      "args": [
        "tools/multiply.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "a": {
            "type": "number",
            "description": "First number"
          },
          "b": {
            "type": "number",
            "description": "Second number"
          }
        },
        "required": [
          "a",
          "b"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{a} × {b}"
    },
    {
      "name": "divide",
      "description": "Divide one number by another",
      "command": "python3",
      "args": [
        "tools/divide.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "a": {
            "type": "number",
            "description": "Dividend (number to be divided)"
          },
          "b": {
            "type": "number",
            "description": "Divisor (number to divide by)"
          }
        },
        "required": [
          "a",
          "b"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{a} ÷ {b}"
    },
    {
      "name": "calculate",
      "description": "Evaluate a mathematical expression. Supports arithmetic operators (+, -, *, /, **, //, %), mathematical functions (sqrt, sin, cos, tan, log, exp, abs, ceil, floor), and constants (pi, e). Use this for complex expressions that require multiple operations.",
      "command": "python3",
      "args": [
        "tools/calculate.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "expression": {
            "type": "string",
            "description": "Mathematical expression to evaluate (e.g., '2 * (3 + 4)', 'sqrt(16) + 3', 'sin(pi/2)')"
          }
        },
        "required": [
          "expression"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{expression}"
    },
    {
      "name": "solve-equation",
      "description": "Solve algebraic equations symbolically using SymPy. Supports linear equations (2*x + 3 = 7), quadratic equations (x**2 - 5*x + 6 = 0), rational equations (1/x + 2 = 3), and more. Returns all solutions including complex numbers when applicable.",
      "command": "python3",
      "args": [
        "tools/solve-equation.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "equation": {
            "type": "string",
            "description": "Algebraic equation to solve (e.g., '2*x + 3 = 7', 'x**2 - 5*x + 6 = 0', 'y**2 = 16')"
          },
          "variable": {
            "type": "string",
            "description": "Variable to solve for (default: x)"
          }
        },
        "required": [
          "equation"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{equation}"
    },
    {
      "name": "differentiate",
      "description": "Compute the derivative of a mathematical expression symbolically using SymPy. Supports polynomial, trigonometric, exponential, and logarithmic functions. Can compute higher-order derivatives.",
      "command": "python3",
      "args": [
        "tools/differentiate.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "expression": {
            "type": "string",
            "description": "Mathematical expression to differentiate (e.g., 'x**3', 'sin(x)', 'x**2 + 2*x + 1')"
          },
          "variable": {
            "type": "string",
            "description": "Variable to differentiate with respect to (default: x)"
          },
          "order": {
            "type": "integer",
            "description": "Order of derivative (1 for first derivative, 2 for second, etc. - default: 1)"
          }
        },
        "required": [
          "expression"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "d/d{variable} {expression}"
    },
    {
      "name": "integrate",
      "description": "Compute the integral of a mathematical expression symbolically using SymPy. Supports both definite and indefinite integrals. For definite integrals, provide both lower_bound and upper_bound. For indefinite integrals, omit both bounds.",
      "command": "python3",
      "args": [
        "tools/integrate.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "expression": {
            "type": "string",
            "description": "Mathematical expression to integrate (e.g., 'x**2', '3*x**2 + 2*x + 1', 'sin(x)')"
          },
          "variable": {
            "type": "string",
            "description": "Variable to integrate with respect to (default: x)"
          },
          "lower_bound": {
            "type": "string",
            "description": "Lower bound for definite integral (number or expression like '0', 'pi')"
          },
          "upper_bound": {
            "type": "string",
            "description": "Upper bound for definite integral (number or expression like '1', '2*pi')"
          }
        },
        "required": [
          "expression"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "∫ {expression}"
    },
    {
      "name": "limit",
      "description": "Compute the limit of a mathematical expression as a variable approaches a point using SymPy. Supports limits at finite points, infinity, and one-sided limits.",
      "command": "python3",
      "args": [
        "tools/limit.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "expression": {
            "type": "string",
            "description": "Mathematical expression to compute limit of (e.g., 'sin(x)/x', '(x**2 - 1)/(x - 1)')"
          },
          "variable": {
            "type": "string",
            "description": "Variable in the limit (default: x)"
          },
          "point": {
            "type": "string",
            "description": "Point to approach (number, 'inf', or '-inf' - default: 0)"
          },
          "direction": {
            "type": "string",
            "description": "Direction of limit: '+' for right limit, '-' for left limit, omit for two-sided limit"
          }
        },
        "required": [
          "expression"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "lim {expression} as {variable}→{point}"
    },
    {
      "name": "matrix-determinant",
      "description": "Compute the determinant of a square matrix using SymPy. Useful for testing matrix invertibility and solving systems of linear equations.",
      "command": "python3",
      "args": [
        "tools/matrix-determinant.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "matrix": {
            "type": "array",
            "description": "Square matrix as a 2D array (list of lists), e.g., [[1, 2], [3, 4]]",
            "items": {
              "type": "array",
              "items": {
                "type": "number"
              }
            }
          }
        },
        "required": [
          "matrix"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "det(matrix)"
    },
    {
      "name": "matrix-inverse",
      "description": "Compute the inverse of a square matrix using SymPy. Returns error if matrix is singular (determinant is zero).",
      "command": "python3",
      "args": [
        "tools/matrix-inverse.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "matrix": {
            "type": "array",
            "description": "Square matrix as a 2D array (list of lists), e.g., [[1, 2], [3, 4]]",
            "items": {
              "type": "array",
              "items": {
                "type": "number"
              }
            }
          }
        },
        "required": [
          "matrix"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "matrix⁻¹"
    },
    {
      "name": "matrix-multiply",
      "description": "Multiply two matrices using SymPy. Matrix dimensions must be compatible: matrix_a columns must equal matrix_b rows.",
      "command": "python3",
      "args": [
        "tools/matrix-multiply.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "matrix_a": {
            "type": "array",
            "description": "First matrix as a 2D array (list of lists)",
            "items": {
              "type": "array",
              "items": {
                "type": "number"
              }
            }
          },
          "matrix_b": {
            "type": "array",
            "description": "Second matrix as a 2D array (list of lists)",
            "items": {
              "type": "array",
              "items": {
                "type": "number"
              }
            }
          }
        },
        "required": [
          "matrix_a",
          "matrix_b"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "A × B"
    },
    {
      "name": "matrix-eigenvalues",
      "description": "Compute eigenvalues (and optionally eigenvectors) of a square matrix using SymPy. Essential for understanding linear transformations and matrix diagonalization.",
      "command": "python3",
      "args": [
        "tools/matrix-eigenvalues.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "matrix": {
            "type": "array",
            "description": "Square matrix as a 2D array (list of lists), e.g., [[4, 1], [2, 3]]",
            "items": {
              "type": "array",
              "items": {
                "type": "number"
              }
            }
          },
          "include_eigenvectors": {
            "type": "boolean",
            "description": "Whether to also compute eigenvectors (default: false)"
          }
        },
        "required": [
          "matrix"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "eigenvalues of matrix"
    },
    {
      "name": "solve-ode",
      "description": "Solve an ordinary differential equation (ODE) symbolically using SymPy. Returns the general solution with arbitrary constants. Supports first-order and higher-order ODEs. Use notation like f'(x) for derivatives or Derivative(f(x), x).",
      "command": "python3",
      "args": [
        "tools/solve-ode.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "equation": {
            "type": "string",
            "description": "Differential equation to solve (e.g., \"f'(x) + 2*f(x) = 0\", \"f''(x) - 4*f(x) = 0\")"
          },
          "function": {
            "type": "string",
            "description": "Function name to solve for (default: f)"
          },
          "variable": {
            "type": "string",
            "description": "Independent variable (default: x)"
          }
        },
        "required": [
          "equation"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{equation}"
    },
    {
      "name": "solve-ode-ivp",
      "description": "Solve an ODE initial value problem symbolically using SymPy. Returns the specific solution satisfying given initial conditions. Useful for finding particular solutions to differential equations.",
      "command": "python3",
      "args": [
        "tools/solve-ode-ivp.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "equation": {
            "type": "string",
            "description": "Differential equation to solve (e.g., \"f'(x) + 2*f(x) = 0\")"
          },
          "initial_conditions": {
            "type": "object",
            "description": "Initial conditions as key-value pairs (e.g., {\"f(0)\": 1, \"f'(0)\": 0})",
            "additionalProperties": {
              "type": "number"
            }
          },
          "function": {
            "type": "string",
            "description": "Function name to solve for (default: f)"
          },
          "variable": {
            "type": "string",
            "description": "Independent variable (default: x)"
          }
        },
        "required": [
          "equation",
          "initial_conditions"
        ]
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{equation} with IVP"
    },
    {
      "name": "cannot-calculate",
      "description": "Call this when you cannot perform the requested calculation with your available arithmetic tools (add, subtract, multiply, divide)",
      "command": "python3",
      "args": [
        "tools/cannot-calculate.py"
      ],
      "schema": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "Explanation of why the calculation cannot be performed"
          }
        }
      },
      "visible_to": [
        "math-expert"
      ],
      "subtext": "{reason}"
    }
  ],
  "agents": [
    {
      "name": "math-expert",
      "description": "Expert mathematician specializing in arithmetic, algebra, calculus, linear algebra, and differential equations",
      "system_prompt_file": "agents/math-expert.md",
      "tools": [
        "add",
        "subtract",
        "multiply",
        "divide",
        "calculate",
        "solve-equation",
        "differentiate",
        "integrate",
        "limit",
        "matrix-determinant",
        "matrix-inverse",
        "matrix-multiply",
        "matrix-eigenvalues",
        "solve-ode",
        "solve-ode-ivp",
        "cannot-calculate"
      ]
    }
  ],
  "activationMode": "always"
}